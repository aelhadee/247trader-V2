# 247trader-v2 Signal Configuration
# Tunable parameters for trigger detection

triggers:
  # Direction filter (long-only strategy)
  only_upside: false  # Allow downside scans for mean reversion entries
  
  # Rate limiting
  max_triggers_per_cycle: 5  # Cap triggers to focus on quality
  
  # Regime-aware trigger thresholds
  regime_thresholds:
    chop:
      pct_change_15m: 1.5        # Loose enough to surface signals in chop
      pct_change_60m: 3.0        # Sustained move threshold tuned for chop
      volume_ratio_1h: 1.8       # Slightly easier volume confirmation in chop
      atr_filter_min_mult: 1.05  # Allow quieter tapes to pass ATR filter
    bull:
      pct_change_15m: 3.5        # Higher bar in bull (momentum expected)
      pct_change_60m: 7.0        # Strong sustained moves
      volume_ratio_1h: 2.0       # Demand strong volume confirmation
      atr_filter_min_mult: 1.2   # Normal volatility requirement
    bear:
      pct_change_15m: 3.0        # Moderate threshold
      pct_change_60m: 7.0        # Strong moves only
      volume_ratio_1h: 2.0       # High volume confirmation
      atr_filter_min_mult: 1.2   # Normal volatility requirement

  # Reversal confirmation checklist (Option A conviction boosts)
  reversal_confirm:
    close_above_vwap_5m: true          # price > 5m VWAP
    higher_low_vs_prev: true           # last swing low > previous swing low
    rsi_cross_up_50: true              # RSI(14) crossed above 50
    min_bounce_from_low_pct: 0.6       # minimum % bounce off local low

  # Trend guard: require upward-sloping hourly EMA before reversals
  trend_filter:
    enabled: true
    ema_period_hours: 21              # Smooth local trend on 21h basis
    slope_lookback_hours: 3           # Evaluate slope over last 3 hours
    min_slope_pct_per_hour: 0.05      # Require +0.05% per hour drift
  
  # Mean reversion archetype (downside stretches with liquidity guardrails)
  mean_reversion:
    enabled: true
    zscore_max: -1.2
    lookback_hours: 24
    min_liquidity_tier: T1
    stop_atr: 1.2
    take_profit_atr: 1.8

  # Legacy parameters (backward compatibility)
  volume_spike_min_ratio: 1.5
  volume_lookback_periods: 24
  breakout_lookback_bars: 24
  breakout_threshold_pct: 2.0
  min_trigger_score: 0.2
  min_trigger_confidence: 0.5
  
  # Regime multipliers (deprecated - use regime_thresholds)
  regime_multipliers:
    bull: 1.2
    chop: 1.0
    bear: 0.8
    crash: 0.0
